# Connect - Fullstack Video Call & Chat Application

Connect is a modern, full-stack real-time video calling and chat application. It features secure authentication, room management, user profiles, and a beautiful dark-themed UI.

## âœ¨ Features

- **ğŸ” Authentication**: Secure Login and Signup powered by Supabase Auth.
- **ğŸ  Room Management**: Create instant meeting rooms or join existing ones via ID.
- **ğŸ‘¤ User Profiles**: Customizable profiles with avatars and real names.
- **ğŸ¥ HD Video Calls**: Peer-to-peer video/audio calls using WebRTC (PeerJS).
- **ğŸ’¬ Real-time Chat**: Live chat with message history, isolated per room.
- **ğŸ¨ Modern UI**: Glassmorphism design, floating controls, and responsive layout.

## ğŸ› ï¸ Tech Stack

- **Frontend**: Next.js 14 (App Router), React, Tailwind CSS
- **Backend**: Node.js, Express, Socket.IO
- **Signaling**: PeerJS (Custom Server)
- **Database & Auth**: Supabase

## ğŸš€ Getting Started

### Prerequisites

- Node.js (v16+)
- A Supabase project

### Installation

1. **Clone the repository**

   ```bash
   git clone <repository-url>
   cd Connect
   ```

2. **Install dependencies**

   ```bash
   npm install
   ```

3. **Environment Setup**
   Create a `.env.local` file:

   ```env
   NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_key
   NEXT_PUBLIC_PEER_PORT=9001
   ```

4. **Database Setup (Supabase)**
   Run the following SQL in your Supabase SQL Editor to set up the tables:

   ```sql
   -- 1. Create Profiles Table
   create table profiles (
     id uuid references auth.users on delete cascade not null primary key,
     username text unique,
     full_name text,
     avatar_url text,
     website text,
     updated_at timestamp with time zone
   );

   -- 2. Create Messages Table
   create table messages (
     id bigint generated by default as identity primary key,
     created_at timestamp with time zone default timezone('utc'::text, now()) not null,
     content text,
     author text,
     timestamp text,
     "senderId" text,
     room_id text not null
   );

   -- 3. Enable RLS (Row Level Security)
   alter table profiles enable row level security;
   alter table messages enable row level security;

   -- 4. Add Policies (Simplified for demo)
   create policy "Public profiles" on profiles for select using (true);
   create policy "User update own profile" on profiles for update using (auth.uid() = id);
   create policy "Public messages" on messages for select using (true);
   create policy "Insert messages" on messages for insert with check (true);
   ```

### Running the App

You need to run **three servers** concurrently:

1. **Frontend (Next.js)**

   ```bash
   npm run dev
   ```

   Runs on `http://localhost:3000`

2. **Socket Server (Chat)**

   ```bash
   npm run server
   ```

   Runs on port `3001`

3. **Peer Server (Video)**
   ```bash
   npm run peer-server
   ```
   Runs on port `9001`

## ğŸ“– Usage Guide

1. **Sign Up/Login**: Create an account to get started.
2. **Dashboard**:
   - Click **"Create Instant Meeting"** to generate a new room.
   - Or enter a **Room ID** to join an existing call.
3. **Profile**: Update your name and avatar in the Profile section.
4. **In Call**:
   - Share the **Room ID** (from the URL) with others.
   - Use the floating bar to toggle **Mic/Camera**.
   - Chat in real-time using the sidebar.

## ğŸ”§ Troubleshooting

- **"Page not found" on refresh**: Ensure you are running in `dev` mode. Static export is disabled.
- **Video connection fails**: Check if `npm run peer-server` is running and port 9001 is open.
- **Chat duplicates**: This is fixed in the latest version, but ensure your browser cache is cleared if issues persist.
